{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91970\\\\Desktop\\\\E-Mart-Group3\\\\my-app\\\\src\\\\pages\\\\ProductList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./ProductList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProductList = () => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [isMember, setIsMember] = useState(false);\n  const [supercoins, setSupercoins] = useState(0);\n  const [selectedSupercoinProducts, setSelectedSupercoinProducts] = useState({});\n  useEffect(() => {\n    fetchProducts();\n    fetchUserMembership();\n  }, []);\n  const fetchProducts = async () => {\n    try {\n      const response = await axios.get(\"/api/products\");\n      setProducts(response.data);\n    } catch (error) {\n      console.error(\"Error fetching products:\", error);\n    }\n  };\n  const fetchUserMembership = async () => {\n    try {\n      const response = await axios.get(\"/api/user/membership\");\n      setIsMember(response.data.isMember);\n      setSupercoins(response.data.supercoins);\n    } catch (error) {\n      console.error(\"Error fetching membership:\", error);\n    }\n  };\n  const handleSupercoinToggle = productId => {\n    setSelectedSupercoinProducts(prevState => ({\n      ...prevState,\n      [productId]: !prevState[productId]\n    }));\n  };\n  const calculateDiscountedPrice = price => {\n    return isMember ? price * 0.9 : price;\n  };\n  const calculateFinalPrice = (price, productId) => {\n    const discountedPrice = calculateDiscountedPrice(price);\n    if (selectedSupercoinProducts[productId]) {\n      const supercoinValue = supercoins * 0.1;\n      return Math.max(0, discountedPrice - supercoinValue);\n    }\n    return discountedPrice;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-list\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Our Products\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-grid\",\n      children: products.map(product => {\n        const discountedPrice = calculateDiscountedPrice(product.price);\n        const finalPrice = calculateFinalPrice(product.price, product.id);\n        const supercoinsUsed = selectedSupercoinProducts[product.id] ? supercoins : 0;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: product.image,\n            alt: product.name,\n            className: \"product-image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"product-name\",\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"product-price\",\n            children: [isMember && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"original-price\",\n              children: [\"\\u20B9\", product.price.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 37\n            }, this), \"\\u20B9\", discountedPrice.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 29\n          }, this), isMember ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"member-discount\",\n            children: \"You saved 10% as a member!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"non-member-message\",\n            children: \"Become a member & save 10%\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"supercoin-option\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              id: `supercoin-${product.id}`,\n              checked: selectedSupercoinProducts[product.id] || false,\n              onChange: () => handleSupercoinToggle(product.id)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: `supercoin-${product.id}`,\n              children: [\"Use \", supercoins, \" Supercoins (\", (supercoins * 0.1).toFixed(2), \" off)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"final-price\",\n            children: [\"Final Price: \\u20B9\", finalPrice.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"buy-button\",\n            children: \"Buy Now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 29\n          }, this)]\n        }, product.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n};\n_s(ProductList, \"gaZK9fbepLxcWW8FS9UlyjxW6N4=\");\n_c = ProductList;\nexport default ProductList;\nvar _c;\n$RefreshReg$(_c, \"ProductList\");","map":{"version":3,"names":["React","useEffect","useState","axios","jsxDEV","_jsxDEV","ProductList","_s","products","setProducts","isMember","setIsMember","supercoins","setSupercoins","selectedSupercoinProducts","setSelectedSupercoinProducts","fetchProducts","fetchUserMembership","response","get","data","error","console","handleSupercoinToggle","productId","prevState","calculateDiscountedPrice","price","calculateFinalPrice","discountedPrice","supercoinValue","Math","max","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","product","finalPrice","id","supercoinsUsed","src","image","alt","name","toFixed","type","checked","onChange","htmlFor","_c","$RefreshReg$"],"sources":["C:/Users/91970/Desktop/E-Mart-Group3/my-app/src/pages/ProductList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./ProductList.css\";\n\nconst ProductList = () => {\n    const [products, setProducts] = useState([]);\n    const [isMember, setIsMember] = useState(false);\n    const [supercoins, setSupercoins] = useState(0);\n    const [selectedSupercoinProducts, setSelectedSupercoinProducts] = useState({});\n\n    useEffect(() => {\n        fetchProducts();\n        fetchUserMembership();\n    }, []);\n\n    const fetchProducts = async () => {\n        try {\n            const response = await axios.get(\"/api/products\");\n            setProducts(response.data);\n        } catch (error) {\n            console.error(\"Error fetching products:\", error);\n        }\n    };\n\n    const fetchUserMembership = async () => {\n        try {\n            const response = await axios.get(\"/api/user/membership\");\n            setIsMember(response.data.isMember);\n            setSupercoins(response.data.supercoins);\n        } catch (error) {\n            console.error(\"Error fetching membership:\", error);\n        }\n    };\n\n    const handleSupercoinToggle = (productId) => {\n        setSelectedSupercoinProducts((prevState) => ({\n            ...prevState,\n            [productId]: !prevState[productId],\n        }));\n    };\n\n    const calculateDiscountedPrice = (price) => {\n        return isMember ? price * 0.9 : price;\n    };\n\n    const calculateFinalPrice = (price, productId) => {\n        const discountedPrice = calculateDiscountedPrice(price);\n        if (selectedSupercoinProducts[productId]) {\n            const supercoinValue = supercoins * 0.1;\n            return Math.max(0, discountedPrice - supercoinValue);\n        }\n        return discountedPrice;\n    };\n\n    return (\n        <div className=\"product-list\">\n            <h2>Our Products</h2>\n            <div className=\"product-grid\">\n                {products.map((product) => {\n                    const discountedPrice = calculateDiscountedPrice(product.price);\n                    const finalPrice = calculateFinalPrice(product.price, product.id);\n                    const supercoinsUsed = selectedSupercoinProducts[product.id] ? supercoins : 0;\n\n                    return (\n                        <div key={product.id} className=\"product-card\">\n                            <img src={product.image} alt={product.name} className=\"product-image\" />\n                            <h3 className=\"product-name\">{product.name}</h3>\n                            <p className=\"product-price\">\n                                {isMember && (\n                                    <span className=\"original-price\">₹{product.price.toFixed(2)}</span>\n                                )}\n                                ₹{discountedPrice.toFixed(2)}\n                            </p>\n                            {isMember ? (\n                                <p className=\"member-discount\">You saved 10% as a member!</p>\n                            ) : (\n                                <p className=\"non-member-message\">Become a member & save 10%</p>\n                            )}\n\n                            <div className=\"supercoin-option\">\n                                <input\n                                    type=\"checkbox\"\n                                    id={`supercoin-${product.id}`}\n                                    checked={selectedSupercoinProducts[product.id] || false}\n                                    onChange={() => handleSupercoinToggle(product.id)}\n                                />\n                                <label htmlFor={`supercoin-${product.id}`}>\n                                    Use {supercoins} Supercoins ({(supercoins * 0.1).toFixed(2)} off)\n                                </label>\n                            </div>\n\n                            <p className=\"final-price\">\n                                Final Price: ₹{finalPrice.toFixed(2)}\n                            </p>\n                            <button className=\"buy-button\">Buy Now</button>\n                        </div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n};\n\nexport default ProductList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}